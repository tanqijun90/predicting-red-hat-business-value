bin_act={'char_1':50,'char_2':50,'char_3':50,'char_4':50,'char_5':50,'char_6':50,'char_7':50,'char_8':50,'char_9':50,'char_10':100}
bin_peo={'group_1':800,'pchar_3':50,'pchar_4':50}
sample_frac=0.95
early_stopping_rounds=50
eta=0.02
num_round = [6000,1000]
tree_build_subsample=0.7
col_sample_tree=1
0.9750899397480776, 0.97840083416983
#######################################
colsample=0.3
num_round=[1000,3000,5000,7000]
0.98538508, 0.99346369, 0.9948787 , 0.99525254

colsample=0.7
num_round=[1000,3000,5000]
0.98829749,0.9947147 , 0.99562921
#######################################
bin_size=50
sample_frac=0.1
early_stopping_rounds=100
eta=0.02
num_round = 1000
tree_build_subsample=0.7
col_sample_tree=0.7
0.9644592809604188

bin_size=50
sample_frac=0.07
early_stopping_rounds=100
eta=0.02
num_round = 1000
tree_build_subsample=0.7
col_sample_tree=0.7
0.9620777374503748

bin_size=50
sample_frac=0.07
early_stopping_rounds=100
eta=0.02
num_round = 1000
tree_build_subsample=0.7
col_sample_tree=0.9
0.9626221967280617


bin_act={'char_1':2,'char_2':2,'char_3':2,'char_4':2,'char_5':2,'char_6':2,'char_7':2,'char_8':2,'char_9':2,'char_10':50}
bin_peo={'group_1':50,'pchar_3':50,'pchar_4':50}
sample_frac=0.1
early_stopping_rounds=100
eta=0.02
num_round = 1000
tree_build_subsample=0.7
col_sample_tree=0.7
0.9590346556778686

bin_act={'char_1':50,'char_2':50,'char_3':50,'char_4':50,'char_5':50,'char_6':50,'char_7':50,'char_8':50,'char_9':50,'char_10':100}
bin_peo={'group_1':100,'pchar_3':50,'pchar_4':50}
sample_frac=0.1
early_stopping_rounds=100
eta=0.02
num_round = 1000
tree_build_subsample=0.7
col_sample_tree=0.7
0.9629136236521247

bin_act={'char_1':50,'char_2':50,'char_3':50,'char_4':50,'char_5':50,'char_6':50,'char_7':50,'char_8':50,'char_9':50,'char_10':100}
bin_peo={'group_1':200,'pchar_3':50,'pchar_4':50}
sample_frac=0.1
early_stopping_rounds=100
eta=0.02
num_round = 1000
tree_build_subsample=0.7
col_sample_tree=0.7
0.9600511048980181

bin_act={'char_1':50,'char_2':50,'char_3':50,'char_4':50,'char_5':50,'char_6':50,'char_7':50,'char_8':50,'char_9':50,'char_10':100}
bin_peo={'group_1':200,'pchar_3':50,'pchar_4':50}
sample_frac=0.1
early_stopping_rounds=100
eta=0.05
num_round = 700
tree_build_subsample=0.7
col_sample_tree=0.7
0.9629771310041948

bin_act={'char_1':50,'char_2':50,'char_3':50,'char_4':50,'char_5':50,'char_6':50,'char_7':50,'char_8':50,'char_9':50,'char_10':100}
bin_peo={'group_1':200,'pchar_3':50,'pchar_4':50}
sample_frac=0.1
early_stopping_rounds=100
eta=0.1
num_round = 500
tree_build_subsample=0.7
col_sample_tree=0.7
0.963864626669877

bin_act={'char_1':50,'char_2':50,'char_3':50,'char_4':50,'char_5':50,'char_6':50,'char_7':50,'char_8':50,'char_9':50,'char_10':100}
bin_peo={'group_1':200,'pchar_3':50,'pchar_4':50}
sample_frac=0.1
early_stopping_rounds=100
eta=0.2
num_round = 300
tree_build_subsample=0.7
col_sample_tree=0.7
0.963263691183014

bin_act={'char_1':50,'char_2':50,'char_3':50,'char_4':50,'char_5':50,'char_6':50,'char_7':50,'char_8':50,'char_9':50,'char_10':100}
bin_peo={'group_1':100,'pchar_3':50,'pchar_4':50}
sample_frac=0.1
early_stopping_rounds=100
eta=0.2
num_round = 300
tree_build_subsample=0.7
col_sample_tree=0.7
0.9631221373683675

bin_act={'char_1':50,'char_2':50,'char_3':50,'char_4':50,'char_5':50,'char_6':50,'char_7':50,'char_8':50,'char_9':50,'char_10':100}
bin_peo={'group_1':100,'pchar_3':50,'pchar_4':50}
sample_frac=0.1
early_stopping_rounds=100
eta=0.2
num_round = 250
tree_build_subsample=0.7
col_sample_tree=0.7
0.9627194262489098

bin_act={'char_1':50,'char_2':50,'char_3':50,'char_4':50,'char_5':50,'char_6':50,'char_7':50,'char_8':50,'char_9':50,'char_10':100}
bin_peo={'group_1':100,'pchar_3':100,'pchar_4':100}
sample_frac=0.1
early_stopping_rounds=100
eta=0.2
num_round = 250
tree_build_subsample=0.7
col_sample_tree=0.7
0.9629099900763247

bin_act={'char_1':50,'char_2':50,'char_3':50,'char_4':50,'char_5':50,'char_6':50,'char_7':50,'char_8':50,'char_9':50,'char_10':100}
bin_peo={'group_1':100,'pchar_3':100,'pchar_4':100}
sample_frac=0.1
early_stopping_rounds=100
eta=0.2
num_round = 500
tree_build_subsample=0.7
col_sample_tree=0.7
0.9633144851368597

bin_act={'char_1':50,'char_2':50,'char_3':50,'char_4':50,'char_5':50,'char_6':50,'char_7':50,'char_8':50,'char_9':50,'char_10':100}
bin_peo={'group_1':100,'pchar_3':100,'pchar_4':100}
sample_frac=0.1
early_stopping_rounds=100
eta=0.2
num_round = 750
tree_build_subsample=0.7
col_sample_tree=0.7
0.9631098460497138

bin_act={'char_1':50,'char_2':50,'char_3':50,'char_4':50,'char_5':50,'char_6':50,'char_7':50,'char_8':50,'char_9':50,'char_10':100}
bin_peo={'group_1':200,'pchar_3':50,'pchar_4':50}
sample_frac=0.1
early_stopping_rounds=100
eta=0.2
num_round = 500
tree_build_subsample=0.7
col_sample_tree=0.7
0.9697783830480999

bin_act={'char_1':50,'char_2':50,'char_3':50,'char_4':50,'char_5':50,'char_6':50,'char_7':50,'char_8':50,'char_9':50,'char_10':100}
bin_peo={'group_1':400,'pchar_3':50,'pchar_4':50}
sample_frac=0.1
early_stopping_rounds=100
eta=0.2
num_round = 500
tree_build_subsample=0.7
col_sample_tree=0.7
0.963789264238472

bin_act={'char_1':50,'char_2':50,'char_3':50,'char_4':50,'char_5':50,'char_6':50,'char_7':50,'char_8':50,'char_9':50,'char_10':100}
bin_peo={'group_1':400,'pchar_3':50,'pchar_4':50}
sample_frac=0.1
early_stopping_rounds=100
eta=0.3
num_round = 500
tree_build_subsample=0.7
col_sample_tree=0.7
0.9616100066080736

bin_act={'char_1':50,'char_2':50,'char_3':50,'char_4':50,'char_5':50,'char_6':50,'char_7':50,'char_8':50,'char_9':50,'char_10':100}
bin_peo={'group_1':400,'pchar_3':50,'pchar_4':50}
sample_frac=0.1
early_stopping_rounds=100
eta=0.2
num_round = 400
tree_build_subsample=0.7
col_sample_tree=0.7
0.9635793859246062

bin_act={'char_1':50,'char_2':50,'char_3':50,'char_4':50,'char_5':50,'char_6':50,'char_7':50,'char_8':50,'char_9':50,'char_10':100}
bin_peo={'group_1':400,'pchar_3':50,'pchar_4':50}
sample_frac=0.1
early_stopping_rounds=100
eta=0.2
num_round = 750
tree_build_subsample=0.7
col_sample_tree=0.7
0.9636004385319198

bin_act={'char_1':200,'char_2':200,'char_3':200,'char_4':200,'char_5':200,'char_6':200,'char_7':200,'char_8':200,'char_9':200,'char_10':100}
bin_peo={'group_1':200,'pchar_3':50,'pchar_4':50}
sample_frac=0.1
early_stopping_rounds=100
eta=0.2
num_round = 500
tree_build_subsample=0.7
col_sample_tree=0.7
0.9641819159657187

bin_act={'char_1':200,'char_2':200,'char_3':200,'char_4':200,'char_5':200,'char_6':200,'char_7':200,'char_8':200,'char_9':200,'char_10':100}
bin_peo={'group_1':200,'pchar_3':50,'pchar_4':50}
sample_frac=0.1
early_stopping_rounds=100
eta=0.3
num_round = 500
tree_build_subsample=0.7
col_sample_tree=0.7
0.9623491083872181

bin_act={'char_1':200,'char_2':200,'char_3':200,'char_4':200,'char_5':200,'char_6':200,'char_7':200,'char_8':200,'char_9':200,'char_10':100}
bin_peo={'group_1':200,'pchar_3':50,'pchar_4':50}
sample_frac=0.1
early_stopping_rounds=100
eta=0.2
num_round = 1000
tree_build_subsample=0.7
col_sample_tree=0.7
0.964174119579919

bin_act={'char_1':50,'char_2':50,'char_3':50,'char_4':50,'char_5':50,'char_6':50,'char_7':50,'char_8':50,'char_9':50,'char_10':100}
bin_peo={'group_1':200,'pchar_3':50,'pchar_4':50}
sample_frac=0.1
early_stopping_rounds=100
eta=0.2
num_round = 500
tree_build_subsample=0.7
col_sample_tree=0.7
0.9617914699432021

bin_act={'char_1':400,'char_2':400,'char_3':400,'char_4':400,'char_5':400,'char_6':400,'char_7':400,'char_8':400,'char_9':400,'char_10':100}
bin_peo={'group_1':200,'pchar_3':50,'pchar_4':50}
sample_frac=0.1
early_stopping_rounds=100
eta=0.2
num_round = 500
tree_build_subsample=0.7
col_sample_tree=0.7
0.9629571898202176

bin_act={'char_1':400,'char_2':400,'char_3':400,'char_4':400,'char_5':400,'char_6':400,'char_7':400,'char_8':400,'char_9':400,'char_10':100}
bin_peo={'group_1':200,'pchar_3':50,'pchar_4':50}
sample_frac=0.1
early_stopping_rounds=100
eta=0.2
num_round = 750
tree_build_subsample=0.7
col_sample_tree=0.7
0.9624172964869425

bin_act={'char_1':200,'char_2':200,'char_3':200,'char_4':200,'char_5':200,'char_6':200,'char_7':200,'char_8':200,'char_9':200,'char_10':400}
bin_peo={'group_1':200,'pchar_3':50,'pchar_4':50}
sample_frac=0.1
early_stopping_rounds=100
eta=0.2
num_round = 500
tree_build_subsample=0.7
col_sample_tree=0.7
0.9634646697269659

bin_act={'char_1':50,'char_2':50,'char_3':50,'char_4':50,'char_5':50,'char_6':50,'char_7':50,'char_8':50,'char_9':50,'char_10':100}
bin_peo={'group_1':600,'pchar_3':50,'pchar_4':50}
sample_frac=0.1
early_stopping_rounds=100
eta=0.2
num_round = 1000
tree_build_subsample=0.7
col_sample_tree=0.7
0.9672817411381315

bin_act={'char_1':50,'char_2':50,'char_3':50,'char_4':50,'char_5':50,'char_6':50,'char_7':50,'char_8':50,'char_9':50,'char_10':100}
bin_peo={'group_1':1000,'pchar_3':50,'pchar_4':50}
sample_frac=0.1
early_stopping_rounds=100
eta=0.2
num_round = 1000
tree_build_subsample=0.7
col_sample_tree=0.7
0.9647910961731933

bin_act={'char_1':50,'char_2':50,'char_3':50,'char_4':50,'char_5':50,'char_6':50,'char_7':50,'char_8':50,'char_9':50,'char_10':100}
bin_peo={'group_1':800,'pchar_3':50,'pchar_4':50}
sample_frac=0.1
early_stopping_rounds=100
eta=0.2
num_round = 1000
tree_build_subsample=0.7
col_sample_tree=0.7
0.9692414864045199

bin_act={'char_1':50,'char_2':50,'char_3':50,'char_4':50,'char_5':50,'char_6':50,'char_7':50,'char_8':50,'char_9':50,'char_10':100}
bin_peo={'group_1':800,'pchar_3':50,'pchar_4':50}
sample_frac=0.1
early_stopping_rounds=100
eta=0.05
num_round = 4000
tree_build_subsample=0.7
col_sample_tree=0.7
0.9707808952850947

bin_act={'char_1':50,'char_2':50,'char_3':50,'char_4':50,'char_5':50,'char_6':50,'char_7':50,'char_8':50,'char_9':50,'char_10':100}
bin_peo={'group_1':800,'pchar_3':50,'pchar_4':50}
sample_frac=0.2
early_stopping_rounds=50
eta=0.05
num_round = 2000
tree_build_subsample=0.7
col_sample_tree=1
0.9707667221082711

bin_act={'char_1':50,'char_2':50,'char_3':50,'char_4':50,'char_5':50,'char_6':50,'char_7':50,'char_8':50,'char_9':50,'char_10':100}
bin_peo={'group_1':800,'pchar_3':50,'pchar_4':50}
sample_frac=0.1
early_stopping_rounds=50
eta=0.02
num_round = 6000
tree_build_subsample=0.7
col_sample_tree=1
0.9694497361821376

bin_act={'char_1':50,'char_2':50,'char_3':50,'char_4':50,'char_5':50,'char_6':50,'char_7':50,'char_8':50,'char_9':50,'char_10':100}
bin_peo={'group_1':1200,'pchar_3':50,'pchar_4':50}
sample_frac=0.2
early_stopping_rounds=50
eta=0.1
num_round = 2000
tree_build_subsample=1
col_sample_tree=1
0.9696484875277067

bin_act={'char_1':50,'char_2':50,'char_3':50,'char_4':50,'char_5':50,'char_6':50,'char_7':50,'char_8':50,'char_9':50,'char_10':100}
bin_peo={'group_1':1200,'pchar_3':50,'pchar_4':50}
sample_frac=0.2
early_stopping_rounds=50
eta=0.2
num_round = 2000
tree_build_subsample=1
col_sample_tree=1
0.9740492047542146

bin_act={'char_1':50,'char_2':50,'char_3':50,'char_4':50,'char_5':50,'char_6':50,'char_7':50,'char_8':50,'char_9':50,'char_10':100}
bin_peo={'group_1':1200,'pchar_3':1000,'pchar_4':1000}
sample_frac=0.2
early_stopping_rounds=50
eta=0.2
num_round = 4000
tree_build_subsample=1
col_sample_tree=0.5
0.9734267282006044

bin_act={'char_1':50,'char_2':50,'char_3':50,'char_4':50,'char_5':50,'char_6':50,'char_7':50,'char_8':50,'char_9':50,'char_10':100}
bin_peo={'group_1':1200,'pchar_3':1000,'pchar_4':1000}
sample_frac=0.2
early_stopping_rounds=50
eta=0.2
num_round = 4000
tree_build_subsample=0.7
col_sample_tree=1
0.9711524999775503

bin_act={'char_1':50,'char_2':50,'char_3':50,'char_4':50,'char_5':50,'char_6':50,'char_7':50,'char_8':50,'char_9':50,'char_10':100}
bin_peo={'group_1':1200,'pchar_3':50,'pchar_4':50}
sample_frac=0.2
early_stopping_rounds=50
eta=0.2
num_round = 2000
tree_build_subsample=1
col_sample_tree=1
0.9697896279824897

bin_act={'char_1':50,'char_2':50,'char_3':50,'char_4':50,'char_5':50,'char_6':50,'char_7':50,'char_8':50,'char_9':50,'char_10':100}
bin_peo={'group_1':2000,'pchar_3':2000,'pchar_4':2000}
sample_frac=0.2
early_stopping_rounds=50
eta=0.2
num_round = 4000
tree_build_subsample=0.7
col_sample_tree=1
0.9691538772076017

bin_act={'char_1':50,'char_2':50,'char_3':50,'char_4':50,'char_5':50,'char_6':50,'char_7':50,'char_8':50,'char_9':50,'char_10':100}
bin_peo={'group_1':2000,'pchar_3':2000,'pchar_4':2000}
sample_frac=0.2
early_stopping_rounds=10
eta=0.2
num_round = 4000
tree_build_subsample=0.7
col_sample_tree=1
0.9693471441393194

bin_act={'char_1':50,'char_2':50,'char_3':50,'char_4':50,'char_5':50,'char_6':50,'char_7':50,'char_8':50,'char_9':50,'char_10':100}
bin_peo={'group_1':2000,'pchar_3':2000,'pchar_4':2000}
sample_frac=0.5
early_stopping_rounds=10
eta=0.4
num_round = 4000
tree_build_subsample=0.7
col_sample_tree=1
0.9757843066274544
#######################################
#In [7]: data_test['act_week_num_group_rt_s'].mean()
#Out[7]: 0.2971302640734569

#In [8]: data_test['act_week_num_group_rt_us'].mean()
#Out[8]: 0.3758489794199568

#In [9]: data_test['group_rt_s'].mean()
#Out[9]: 0.4447479080064249

#In [10]: data_test['group_rt_us'].mean()
#Out[10]: 0.4167423654516761

#In [13]: data_test['char_10_x_char_38_rt_s'].mean()
#Out[13]: 0.5149783331027278

#In [14]: data_test['char_10_x_char_38_rt_us'].mean()
#Out[14]: 0.3131523380396922
#######################################
# group_1 and char_10_x
#100 rounds
#0.9714355901427104

#char_10_x
#100 rounds
#0.9697400162507868

#
#100 rounds
#0.9698041355825879

#group_1
#100 rounds
#0.9715290801890798

#group_1
#40 rounds
#0.9698352957990198

#group_1
#50 rounds
#0.9703071807556333

#0.9698352957990198

#group_1
#no mimic
#0.851903711122741

#group_1, no 'char_6_y_prod_char_7_y',
#50 rounds
#0.9722038470095546
###########################################
# m_test_small['act_date_int_group_1_rt'].value_counts()
#Out[155]: 
#0.000000        80063
#1.000000        58175
#60000.000000    20844
#len(m_test_small)
#Out[156]: 160173

20844/160173
#.13013429229645445861

###########################################
len(m_test)
#Out[32]: 498687
 len(m_test_wo)
#Out[33]: 69073
m_test_wo['group_1'].value_counts()
#Out[34]: 
# group 20876    868
# group 33904    490
# group 26933    416
# group 2665     397
# group 28885    388
# group 26426    383
# group 18704    322
# group 25073    318
# group 8314     296
# group 6895     283
# group 10206    276
# group 21802    275
# group 34084    270
# group 1805     259
# group 34251    252
# group 9340     251
# group 18       242
# group 28727    239
# group 23112    234
# group 18831    224
# group 33180    222
# group 46339    220
# group 18476    217
# group 9816     210
# group 35802    208
# group 38735    202
# group 21659    202
# group 18152    198
# group 27790    194
# group 25804    192

m_test['group_1'].value_counts()
# Out[35]: 
# group 17304    165604
# group 667        3904
# group 8386       2194
# group 17899      1224
# group 9280       1166
# group 450         989
# group 1270        911
# group 3598        889
# group 1482        883
# group 20876       868
# group 18559       853
# group 15723       833
# group 418         784
# group 7256        769
# group 9702        754
# group 1490        750
# group 5149        729
# group 3702        711
# group 7124        693
# group 3229        686
# group 142         671
# group 11143       641
# group 7403        614
# group 956         602
# group 9439        576
# group 28670       568
# group 15588       549
# group 1277        532
# group 33904       490
# group 752         483

m_test_wo['group_1'].value_counts().describe()
# Out[38]: 
# count    4325.000000
# mean       15.970636
# std        33.888930
# min         1.000000
# 25%         2.000000
# 50%         6.000000
# 75%        16.000000
# max       868.000000

#a small group is one whose size smaller than 100



